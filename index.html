<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8"/>
    <title>Gamedev Canvas Workshop</title>
    <style>
      * { padding: 0; margin: 0;}
      canvas { background: #eee; display: block; margin: 0 auto;}
    </style>
  </head>
  <body>
    <canvas id="myCanvas" width="480" height="320"></canvas>
    <script>

      //---------------------------------------------------------------------
      // THE CANVAS
      //---------------------------------------------------------------------

        // Grab a reference to the canvas element.
        var canvas = document.getElementById("myCanvas");

        // Store the 2D rendering context.
        var ctx = canvas.getContext("2d");

      //---------------------------------------------------------------------
      // VARIABLES FOR THE BALL
      //---------------------------------------------------------------------

        // Define the size of the Ball.
        var ballRadius = 10;

        // Create start coordinates.
        var x = canvas.width / 2;
        var y = canvas.height - 30;

        // Define the amount to move.
        var dx = 2;
        var dy = -2;

      //---------------------------------------------------------------------
      // VARIABLES FOR THE PADDLE
      //---------------------------------------------------------------------

        // Define the size of the Paddle.
        var paddleHeight = 10;
        var paddleWidth = 75;
        var paddleX = ( canvas.width - paddleWidth ) / 2;

      //---------------------------------------------------------------------
      // VARIABLES FOR THE BRICK
      //---------------------------------------------------------------------

        var brickRowCount = 3;
        var brickColumnCount = 5;
        var brickWidth = 75;
        var brickHeight = 20;
        var brickPadding = 10;
        var brickOffsetTop = 30;
        var brickOffsetLeft = 30;

        var bricks = [];
        for ( column = 0; column < brickColumnCount; column++ ) {
          bricks[column] = [];
          for ( row = 0; row < brickRowCount; row++ ) {
            bricks[column][row] = { x: 0, y: 0 };
          }
        }

      //---------------------------------------------------------------------
      // SETTING UP EVENT HANDLERS FOR PADDLE MOVEMENT
      //---------------------------------------------------------------------

        // Begin Creating the Paddle Movement
        var rightPressed = false;
        var leftPressed = false;

        // Event Listeners for Key Actions
        document.addEventListener("keydown", keyDownHandler, false);
        document.addEventListener("keyup", keyUpHandler, false);

        // Define the Handlers

        function keyDownHandler(event){
          if ( event.keyCode == 39 ) {
            rightPressed = true;
          } else if ( event.keyCode == 37 ) {
            leftPressed = true;
          }
        }

        function keyUpHandler(event){
          if ( event.keyCode == 39 ) {
            rightPressed = false;
          } else if ( event.keyCode == 37 ) {
            leftPressed = false;
          }
        }

      //---------------------------------------------------------------------
      // DRAW THE BALL
      //---------------------------------------------------------------------

        function drawBall(){
          // Draw...
          ctx.beginPath();
            // ... a Ball.
            ctx.arc(x, y, ballRadius, 0, Math.PI*2);
            ctx.fillStyle = "#0095DD";
            ctx.fill();

          ctx.closePath();
        }

      //---------------------------------------------------------------------
      // DRAW THE PADDLE
      //---------------------------------------------------------------------

        function drawPaddle(){
          // Draw...
          ctx.beginPath();
            // ... a Paddle.
            ctx.rect(paddleX, (canvas.height - paddleHeight), paddleWidth, paddleHeight);
            ctx.fillStyle = "#0095DD";
            ctx.fill();

          ctx.closePath();
        }

      //---------------------------------------------------------------------
      // DRAW THE BRICKS
      //---------------------------------------------------------------------

        function drawBricks(){
          for ( column = 0; column < brickColumnCount; column++ ){
            for ( row = 0; row < brickRowCount; row++ ){

              var brickX = ( column * ( brickWidth + brickPadding ) ) + brickOffsetLeft;
              var brickY = ( row * ( brickHeight + brickPadding ) ) + brickOffsetTop;
              bricks[column][row].x = brickX;
              bricks[column][row].y = brickY;

              ctx.beginPath();
                ctx.rect(brickX, brickY, brickWidth, brickHeight);
                ctx.fillStyle = "#0095DD";
                ctx.fill();
              ctx.closePath();
            }
          }
        }

      //---------------------------------------------------------------------
      // RENDER THE GAME
      //---------------------------------------------------------------------

        function draw(){

          // Clear the previous rectangle.
          ctx.clearRect(0, 0, canvas.width, canvas.height);

          // Draw the Ball.
          drawBall();

          // Draw the Paddle.
          drawPaddle();

          // Draw the Bricks.
          drawBricks();

          // Bounce the Ball off of the left and right walls.
          if ( x + dx > canvas.width - ballRadius || x + dx < ballRadius ) {
            dx = -dx;
          }

          // Bounce the Ball off of the top wall.
          if ( y + dy < ballRadius ) {
            dy = -dy;
          } else if ( y + dy > canvas.height - ballRadius ) {
            // If the Ball hits the Paddle, it bounces.
            if ( x > paddleX && x < paddleX + paddleWidth){
              dy = -dy;
            } else {
              // If the Ball hits the bottom, the game is over.
              alert("GAME OVER");
              document.location.reload();
            }
          }

          if ( rightPressed && paddleX < canvas.width - paddleWidth ) {
            paddleX += 7;
          } else if ( leftPressed && paddleX > 0 ) {
            paddleX -= 7;
          }

          // Move the Ball.
          x += dx;
          y += dy;

        }

      //---------------------------------------------------------------------
      // RENDRAW EVERY 10 MILISECONDS
      //---------------------------------------------------------------------

        setInterval(draw, 10);

    </script>
  </body>
</html>
